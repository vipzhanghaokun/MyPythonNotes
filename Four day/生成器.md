# 生成器

### 一、列表生成式

​	正常列表

```python
l1 = [1,2,3,4,5,6,7]
```

​	列表生成式

```python
l2 = [ i for i in range(1,8)]
```

​	打印结果

```python
print('l1>>',l1)	#l1>> [1, 2, 3, 4, 5, 6, 7]
print('l2>>',l2)	#l2>> [1, 2, 3, 4, 5, 6, 7]
```

​	我们也可以在列表生成式里进行计算等操作

```python
l2 = [ i * 2 for i in range(1,8)]

print('l2>>',l2)	#l2>> [2, 4, 6, 8, 10, 12, 14]
```



### 二、生成器

​	在Python中，这种一边循环一边计算的机制，称为生成器（generator）

​	创建生成器，只要将列表生成式中的中括号“[]”换成圆括号“()”。即：

```python
g2 = ( i * 2 for i in range(1,8))

print(g2)		# <generator object <genexpr> at 0x000001A0D875D2B0>
```

​	和列表的区别是只有调用的时候才生成数据

​	访问生成器中的元素

```python
# 通过for循环获得数据
for i in g2:
    print(i)
# 输出结果
2
4
6
8
10
12
14
```

​	或生成器方法`__next()__`

```python
g2 = ( i * 2 for i in range(1,8))

print(g2.__next__())
print(g2.__next__())
print(g2.__next__())

# 输出结果
2
4
6
```

​	或者

```python
g2 = ( i * 2 for i in range(1,8))

print(next(g2))
print(next(g2))
print(next(g2))

# 输出结果
2
4
6
```

​	通过函数生成一个生成器

​	斐波那契数列函数

```python
def fib(max):
    n,a,b = 0,0,1
    while n < max:
        print(b)
        a , b = b, a+b
        n = n+1

fib(10)

# 输出结果
1
1
2
3
5
8
13
21
34
55
```

​	我们将print(b)改为yield b，就变成生成器 了

```python
def fib(max):
    n,a,b = 0,0,1
    while n < max:
        yield b
        a , b = b, a+b
        n = n+1

print(fib(10))	# <generator object fib at 0x000001560E83D2B0>

```











